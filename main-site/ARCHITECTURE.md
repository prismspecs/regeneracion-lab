# Architecture: Content Separation

## The Problem with Version 6 (Before Fix)

Previously, ALL page content was embedded inside JavaScript files as template strings in `app.js`. This was a **terrible decision** because:

❌ Content editors had to edit JavaScript code  
❌ Bad for SEO (content generated by JS, not in HTML)  
❌ Difficult to migrate to WordPress  
❌ Content changes required touching code  
❌ No separation of concerns  
❌ Not cacheable  

## The Solution (Current Architecture)

**Content lives in HTML files. JavaScript only handles navigation.**

### File Structure

```
version6/
├── index.html              # Shell: header, nav, container
├── app.js                  # Navigation logic ONLY (151 lines)
├── styles.css              # Global styles
├── spa.css                 # SPA styles
├── metates.jpg             # Hero image
├── README.md               # Setup instructions
├── ARCHITECTURE.md         # This file
└── pages/                  # ALL CONTENT HERE
    ├── home.html           # Home page content
    ├── about.html          # About page content  
    ├── projects.html       # Projects page content
    ├── residents.html      # Residents page with tabs
    ├── students.html       # Students page with forms
    └── support.html        # Support page with forms
```

### How It Works

1. **index.html** provides structure:
   - Site header with logo
   - Top navigation menu
   - Empty content container `<div id="mainContent">`

2. **app.js** handles:
   - Navigation clicks → load appropriate HTML file
   - URL routing (hash-based: `#home`, `#about`, etc.)
   - Fetching HTML files from `/pages/` directory
   - Tab navigation on residents page
   - Loading/error states

3. **pages/*.html** contain:
   - ONLY the page content (no `<html>`, `<head>`, or navigation)
   - Semantic HTML markup
   - Inline form markup
   - Links to other pages and external sites

### Example Flow

```
User clicks "About" 
    ↓
app.js intercepts click
    ↓
fetch('pages/about.html')
    ↓
Inject HTML into #mainContent
    ↓
Update URL to #about
    ↓
Content visible
```

## Benefits of This Architecture

### ✅ For Content Editors
- Edit HTML files directly
- No JavaScript knowledge required
- WYSIWYG-friendly
- Can use any HTML editor

### ✅ For SEO
- Real HTML content (not JS-generated)
- Crawlable by search engines
- Fast initial load
- Progressive enhancement

### ✅ For WordPress Migration
- Each HTML file → WordPress page/template
- Forms → WordPress form plugins
- Navigation → WordPress menus
- CSS → Theme styles
- **No untangling content from JavaScript**

### ✅ For Development
- Clean separation of concerns
- Easy to debug
- Cacheable content files
- Version control friendly (content changes in dedicated files)

## Editing Content

### To Change Text on a Page:
1. Open `/pages/[pagename].html`
2. Edit the HTML
3. Save
4. Refresh browser

**Example:** Change the director bio:
- Open `pages/about.html`
- Find the bio paragraph
- Edit the text
- Save
- Done!

### To Add a New Project:
1. Open `pages/home.html` (or `pages/projects.html`)
2. Copy existing `.project-card` div
3. Paste and modify content
4. Save

### To Update Forms:
1. Find form in appropriate HTML file
2. Edit form fields, labels, or validation
3. Update form action URL (Formspree endpoint)
4. Save

## WordPress Migration Steps (Future)

When ready to move to WordPress:

### 1. Content
- Create WordPress page for each HTML file
- Copy/paste HTML content
- Or: Convert HTML files to theme templates

### 2. Forms
- Install Contact Form 7 or Gravity Forms
- Recreate forms in WordPress
- Replace form HTML with shortcodes

### 3. Navigation
- Create WordPress menu
- Match current structure
- Update theme to use wp_nav_menu()

### 4. Styles
- Move CSS to theme style.css
- Enqueue properly
- May need selector adjustments

### 5. Images
- Upload to Media Library
- Update paths

### 6. Functionality
- Navigation → WordPress menus
- Tabs → JavaScript or plugin
- Forms → Form plugins

## Development Workflow

### Local Testing
```bash
cd version6
python3 -m http.server 8000
# Open http://localhost:8000
```

**Important:** Must use a local server. Opening `index.html` directly won't work (CORS restrictions on fetch()).

### Making Content Changes
1. Edit HTML file in `/pages/`
2. Save
3. Refresh browser (Ctrl+F5 to bypass cache)

### Making Style Changes
1. Edit `styles.css` or `spa.css`
2. Save
3. Refresh browser

### Making Navigation Changes
1. Edit `app.js` only if adding new pages
2. Add new page to navigation in `index.html`
3. Create new HTML file in `/pages/`

## Technical Details

### JavaScript (app.js)
- ES6 class-based
- Fetch API for loading HTML
- History API for routing
- No external dependencies
- ~150 lines total

### Routing
- Hash-based: `#home`, `#about`, `#residents`
- Works without server configuration
- Browser back/forward supported
- Bookmarkable URLs

### Content Loading
- Fetches HTML files on demand
- Caches loaded pages in memory
- Shows loading spinner during fetch
- Error handling for missing pages

### Form Handling
- Forms in HTML use standard markup
- Action points to Formspree (or similar)
- Works with or without JavaScript
- Progressive enhancement

## What NOT to Do

### ❌ NEVER put content in JavaScript
```javascript
// WRONG - Don't do this!
function getContent() {
    return `<p>My content here...</p>`;
}
```

### ✅ ALWAYS put content in HTML
```html
<!-- RIGHT - Do this! -->
<!-- pages/mypage.html -->
<p>My content here...</p>
```

### ❌ NEVER hardcode page content in index.html
The index.html should only have the shell (header, nav, container).

### ✅ ALWAYS use separate HTML files
One file per page in the `/pages/` directory.

## Summary

This architecture ensures:
1. **Content and code are separated**
2. **Easy to edit** (just HTML files)
3. **SEO-friendly** (real HTML)
4. **WordPress-ready** (clean migration path)
5. **Maintainable** (clear structure)

The site works as a simple SPA for navigation, but content is in proper HTML files that can be edited independently of any JavaScript code.

